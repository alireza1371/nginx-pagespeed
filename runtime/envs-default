#!/bin/bash

set -e

# Default
SERVER_NAME=${SERVER_NAME:-"localhost"}
DOCUMENT_ROOT=${DOCUMENT_ROOT:-"/var/www/html"}
INDEX_FILES=${INDEX_FILES:-""}
ALLOW_ORIGIN=${ALLOW_ORIGIN:-"${SERVER_NAME}"}

CERTS_ROOT=${CERTS_ROOT:-/"/usr/certs"}

# FastCGI
FASTCGI_HOST=${FASTCGI_HOST:-""}
FASTCGI_PORT=${FASTCGI_PORT:-"9000"}
FASTCGI_INDEX=${FASTCGI_INDEX:-"index.php"}
FASTCGI_ROOT=${FASTCGI_ROOT:-"${DOCUMENT_ROOT}"}
FASTCGI_CACHE_SUCCESS_TIME=${FASTCGI_CACHE_SUCCESS_TIME:-"60m"}
FASTCGI_CACHE_NOTFOUND_TIME=${FASTCGI_CACHE_NOTFOUND_TIME:-"1m"}

# Pagespeed
PAGESPEED_ENABLE=${PAGESPEED_ENABLE:-"on"}
PAGESPEED_REWRITE_LEVEL=${PAGESPEED_REWRITE_LEVEL:-"PassThrough"}
PAGESPEED_HEADER=${PAGESPEED_HEADER:-"Powered by ngx_pagespeed"}

# Cache
CACHE_LEVEL=${CACHE_LEVEL:-"1:2"}
CACHE_ZONE_SIZE=${CACHE_ZONE_SIZE:-"100m"}
CACHE_INACTIVE_TIME=${CACHE_INACTIVE_TIME:-"60m"}

# WordPress Support
WORDPRESS_ADDON=${WORDPRESS_ADDON:-""}

# Upload
UPLOAD_MAX_SIZE=${UPLOAD_MAX_SIZE:-"1m"}

# SSL
SSL_ENABLED=${SSL_ENABLED:-"no"}
SSL_CERTIFICATE_PATH=${SSL_CERTIFICATE_PATH:-${CERTS_ROOT}/ssl.crt}
SSL_KEY_PATH=${SSL_KEY_PATH:-${CERTS_ROOT}/ssl.key}
SSL_DHPARAM_PATH=${SSL_DHPARAM_PATH:-${CERTS_ROOT}/dhparam.pem}
SSL_VERIFY_CLIENT=${SSL_VERIFY_CLIENT:-off}
SSL_CIPHERS=${SSL_CIPHERS:-'ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA:ECDHE-RSA-DES-CBC3-SHA:AES256-GCM-SHA384:AES128-GCM-SHA256:AES256-SHA256:AES128-SHA256:AES256-SHA:AES128-SHA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!MD5:!PSK:!RC4'}
SSL_CA_CERTIFICATE_PATH=${SSL_CA_CERTIFICATE_PATH:-${CERTS_ROOT}/ca.crt}

# Nginx
NGINX_HSTS_MAXAGE=${NGINX_HSTS_MAXAGE:-15552000}
NGINX_ACCEL_BUFFERING=${NGINX_ACCEL_BUFFERING:-no}
